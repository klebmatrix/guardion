<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenClaw - Terminal Mobile</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #0f172a; color: white; margin: 0; padding-bottom: 50px; }
        .header-img { width: 100%; height: 120px; object-fit: cover; border-bottom: 2px solid #3b82f6; }
        .container { padding: 15px; max-width: 500px; margin: auto; }
        .card { background: #1e293b; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #334155; }
        .wallet-info { display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; }
        .bot-panel { border: 2px solid #3b82f6; background: #1e293b; }
        select, input { width: 100%; padding: 12px; margin: 8px 0; background: #0f172a; color: white; border: 1px solid #334155; border-radius: 8px; font-size: 1rem; box-sizing: border-box; }
        .btn { border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; }
        .btn-update { background: #3b82f6; color: white; }
        .btn-yes { background: #16a34a; color: white; flex: 1; }
        .btn-no { background: #dc2626; color: white; flex: 1; }
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 0.75rem; text-transform: uppercase; }
        .status-on { background: #065f46; color: #34d399; }
        .status-off { background: #7f1d1d; color: #f87171; }
        table { width: 100%; font-size: 0.85rem; border-collapse: collapse; margin-top: 10px; }
        th { text-align: left; color: #94a3b8; padding-bottom: 10px; border-bottom: 1px solid #334155; }
        td { padding: 10px 0; border-bottom: 1px solid #1e293b; }
    </style>
</head>
<body>
    <img src="https://images.unsplash.com/photo-1639762681485-074b7f938ba0?q=80&w=1200&h=140" class="header-img">
    
    <div class="container">
        <div class="card wallet-info">
            <div>
                <small style="color:#94a3b8">EndereÃ§o:</small><br>
                <code>{{ wallet }}</code>
            </div>
            <div style="text-align: right;">
                <b style="color:#22c55e;">$ {{ usdc }} USDC</b><br>
                <small style="color:#fbbf24">{{ pol }} POL</small>
            </div>
        </div>

        <div class="card bot-panel">
            <h3 style="margin:0 0 10px 0;">ðŸ¤– RobÃ´ GuardiÃ£o: 
                <span class="badge {{ 'status-on' if bot.status == 'ON' else 'status-off' }}">
                    {{ bot.status }}
                </span>
            </h3>
            <form action="/toggle_bot" method="post">
                <select name="status">
                    <option value="OFF" {{ 'selected' if bot.status == 'OFF' }}>ðŸ”´ DESLIGAR AUTOMAÃ‡ÃƒO</option>
                    <option value="ON" {{ 'selected' if bot.status == 'ON' }}>ðŸŸ¢ LIGAR AUTOMAÃ‡ÃƒO</option>
                </select>
                <select name="preference">
                    <option value="YES" {{ 'selected' if bot.preference == 'YES' }}>ESTRATÃ‰GIA: ALWAYS YES</option>
                    <option value="NO" {{ 'selected' if bot.preference == 'NO' }}>ESTRATÃ‰GIA: ALWAYS NO</option>
                </select>
                <button type="submit" class="btn btn-update">ATUALIZAR SETUP</button>
            </form>
        </div>

        <h4 style="margin: 20px 0 10px 0; color:#94a3b8;">HISTÃ“RICO DE TRADES</h4>
        <div class="card">
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Mercado</th>
                        <th>Lado</th>
                        <th>Res.</th>
                    </tr>
                </thead>
                <tbody>
                    {% for h in historico %}
                    <tr>
                        <td>{{ h.data }}</td>
                        <td>{{ h.mercado }}</td>
                        <td><span style="color: {{ '#16a34a' if h.lado == 'YES' else '#dc2626' }}">{{ h.lado }}</span></td>
                        <td style="font-weight: bold; color: {{ '#22c55e' if h.resultado == 'WIN' else '#f87171' }}">
                            {{ h.resultado }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <button onclick="location.href='/'" style="background:none; border:none; color:#64748b; width:100%; margin-top:20px; cursor:pointer;">
            â¬… Sair do Terminal
        </button>
    </div>
</body>
</html>