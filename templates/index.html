<div class="card">
    <h2 id="title-{{ nome }}">{{ nome }}</h2>
    <div class="balance-box" style="text-align: left; font-size: 12px;">
        <div>POL: <span id="pol-{{ nome }}">0.0</span></div>
        <div>USDC: <span id="usdc-{{ nome }}">0.0</span></div>
        <div id="extra-{{ nome }}">WBTC: <span id="target-{{ nome }}">0.0</span></div>
    </div>
    <div class="qr-box"><img src="/qr/{{ carteira }}" width="140"></div>
    <button class="btn btn-btc" id="btn-{{ nome }}" onclick="executar('{{ nome }}')">Converter</button>
    <div id="status-{{ nome }}" class="status-area"></div>
</div>

<script>
    async function atualizarSaldos() {
        try {
            const res = await fetch('/saldos');
            const dados = await res.json();
            for (const [mod, s] of Object.entries(dados)) {
                document.getElementById('pol-' + mod).innerText = s.pol;
                document.getElementById('usdc-' + mod).innerText = s.usdc;
                // Mostra WBTC para MOD1 e USDT para MOD2
                if(mod === 'MOD_01') document.getElementById('target-' + mod).innerText = s.wbtc;
                if(mod === 'MOD_02') {
                    document.getElementById('extra-' + mod).innerHTML = `USDT: <span id="target-${mod}">${s.usdt}</span>`;
                }
            }
        } catch (e) { console.log("Erro ao atualizar"); }
    }
    setInterval(atualizarSaldos, 8000);
    atualizarSaldos();
</script>